# XML测试文件使用说明

## 概述

为了测试文件上传自动分析功能，我已经为您创建了5个不同格式的XML测试文件。这些文件展示了系统支持的各种XML格式，您可以直接上传测试自动解析功能。

## 测试文件列表

### 1. test_case_simple.xml
**格式**: 简单平铺结构
**特点**: 
- 使用简单的XML标签
- 直接在元素中包含文本内容
- 适合快速测试基本解析功能

**示例内容**:
```xml
<testcase>
    <precondition>系统已启动并运行正常</precondition>
    <step>打开用户管理页面</step>
    <expected>系统显示"用户创建成功"提示信息</expected>
</testcase>
```

### 2. test_case_chinese.xml
**格式**: 中文标签
**特点**:
- 使用中文XML标签名
- 包含多个测试用例
- 测试中文标签解析能力

**示例内容**:
```xml
<测试用例集>
    <测试用例 编号="TC001" 名称="银行转账功能测试">
        <前置条件>
            <条件>CBS系统运行正常</条件>
        </前置条件>
        <测试步骤>
            <步骤>登录CBS系统</步骤>
        </测试步骤>
        <预期结果>
            <结果>转账操作成功</结果>
        </预期结果>
    </测试用例>
</测试用例集>
```

### 3. test_case_multiple.xml
**格式**: 多用例测试套件
**特点**:
- 包含多个测试用例
- 使用TestSuite结构
- 包含优先级和分类属性

**示例内容**:
```xml
<TestSuite name="电商系统测试套件">
    <TestCase id="TC001" priority="high" category="用户管理">
        <setup>
            <condition>电商系统已部署并运行</condition>
        </setup>
        <action>
            <step>打开商品管理页面</step>
        </action>
        <verification>
            <result>商品保存成功提示</result>
        </verification>
    </TestCase>
</TestSuite>
```

### 4. test_case_nested.xml
**格式**: 复杂嵌套结构
**特点**:
- 深层嵌套的XML结构
- 包含组件和参数信息
- 结构化的测试数据

**注意**: 此格式较为复杂，系统会使用默认模板处理

### 5. test_case_mixed_format.xml
**格式**: 混合格式
**特点**:
- 同时包含属性和文本内容
- 混合使用不同的标签风格
- 包含元数据信息

## 使用方法

### 步骤1: 启动系统
确保AI测试用例生成系统正在运行：
```bash
python app.py
```

### 步骤2: 访问系统
在浏览器中打开: `http://localhost:5000`

### 步骤3: 上传测试文件
1. 点击"选择文件"按钮
2. 选择任意一个测试XML文件
3. 点击"上传"按钮

### 步骤4: 观察自动分析
上传成功后，系统会：
1. 自动解析XML文件内容
2. 提取预置条件、测试步骤、预期结果
3. 自动发送给AI进行分析
4. 在聊天界面显示分析结果

## 预期结果

### 成功解析的文件
- `test_case_simple.xml`: 提取4个预置条件、5个测试步骤、4个预期结果
- `test_case_chinese.xml`: 提取5个预置条件、8个测试步骤、6个预期结果
- `test_case_multiple.xml`: 提取8个预置条件、16个测试步骤、11个预期结果
- `test_case_mixed_format.xml`: 提取4个预置条件、6个测试步骤、5个预期结果

### 使用默认模板的文件
- `test_case_nested.xml`: 由于结构复杂，使用默认CBS系统模板

## 测试要点

### 功能验证
1. **文件上传**: 确认文件能成功上传
2. **XML解析**: 确认系统能正确解析不同格式的XML
3. **自动分析**: 确认上传后自动触发AI分析
4. **结果显示**: 确认分析结果正确显示在界面上

### 错误处理
1. 上传非XML文件，应显示错误提示
2. 上传格式错误的XML，应显示解析错误
3. 网络异常时，应有适当的错误处理

## 故障排除

### 常见问题
1. **文件上传失败**: 检查文件格式是否为XML
2. **解析结果为空**: 检查XML文件是否包含有效的测试用例结构
3. **自动分析未触发**: 检查GenerationService的自动分析功能是否正常

### 日志查看
查看控制台输出，关注以下日志：
- `XML解析成功，提取到 X 个预置条件...`
- `XML文件中未找到结构化测试用例内容，使用默认模板`
- `文件保存成功`

## 下一步

测试完成后，您可以：
1. 继续与AI对话，完善测试用例
2. 点击"生成测试用例"按钮生成最终的XML文件
3. 下载生成的测试用例文件

## 技术说明

系统支持的XML标签包括：
- **预置条件**: `precondition`, `前置条件`, `condition`, `条件`, `setup`
- **测试步骤**: `step`, `测试步骤`, `步骤`, `action`
- **预期结果**: `expected`, `预期结果`, `result`, `结果`, `verification`

系统会自动处理：
- 中英文标签混合
- 多层嵌套结构
- 属性和文本内容混合
- 多个测试用例合并