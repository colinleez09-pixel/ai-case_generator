<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ç®€å•æŒ‰é’®æµ‹è¯•</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background: #f5f5f5;
    }
    .container {
      max-width: 600px;
      margin: 0 auto;
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    .action-btn {
      padding: 10px 24px;
      font-size: 14px;
      font-weight: 500;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s;
      background: #5a7a9a;
      color: white;
      border: none;
      margin: 10px;
    }
    .action-btn:hover {
      background: #4a6a8a;
    }
    .action-btn:disabled {
      background: #ccc;
      cursor: not-allowed;
    }
    .debug-box {
      background: #f0f0f0;
      padding: 15px;
      border-radius: 4px;
      margin: 10px 0;
      font-family: monospace;
      font-size: 12px;
      max-height: 300px;
      overflow-y: auto;
      border: 1px solid #ddd;
    }
    .test-area {
      border: 2px solid #ddd;
      padding: 15px;
      border-radius: 8px;
      margin: 20px 0;
      background: #fafafa;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ”§ ç®€å•æŒ‰é’®æµ‹è¯•</h1>
    <p>è¿™ä¸ªé¡µé¢ç”¨äºæµ‹è¯•æŒ‰é’®ç‚¹å‡»æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚</p>
    
    <div class="test-area">
      <h3>æµ‹è¯•1: ç›´æ¥onclickæµ‹è¯•</h3>
      <button class="action-btn" onclick="testDirectClick()">ç›´æ¥ç‚¹å‡»æµ‹è¯•</button>
      <div id="result1"></div>
    </div>
    
    <div class="test-area">
      <h3>æµ‹è¯•2: addEventListeneræµ‹è¯•</h3>
      <button class="action-btn" id="eventBtn">äº‹ä»¶ç›‘å¬å™¨æµ‹è¯•</button>
      <div id="result2"></div>
    </div>
    
    <div class="test-area">
      <h3>æµ‹è¯•3: åŠ¨æ€åˆ›å»ºæŒ‰é’®æµ‹è¯•</h3>
      <button class="action-btn" onclick="createDynamicButton()">åˆ›å»ºåŠ¨æ€æŒ‰é’®</button>
      <div id="dynamicContainer"></div>
      <div id="result3"></div>
    </div>
    
    <div class="test-area">
      <h3>æµ‹è¯•4: æ¨¡æ‹Ÿå®é™…åœºæ™¯</h3>
      <button class="action-btn" onclick="simulateRealScenario()">æ¨¡æ‹Ÿå®é™…æŒ‰é’®åˆ›å»º</button>
      <div id="chatArea" style="border: 1px solid #ccc; padding: 10px; min-height: 100px; background: white;"></div>
      <div id="result4"></div>
    </div>
    
    <h3>è°ƒè¯•æ—¥å¿—</h3>
    <div class="debug-box" id="debugLog">
      <div style="color: #666;">[ç­‰å¾…æµ‹è¯•...]</div>
    </div>
    
    <button class="action-btn" onclick="clearLog()">æ¸…ç©ºæ—¥å¿—</button>
  </div>

  <script>
    function log(message) {
      const logDiv = document.getElementById('debugLog');
      const timestamp = new Date().toLocaleTimeString();
      logDiv.innerHTML += `<div>[${timestamp}] ${message}</div>`;
      logDiv.scrollTop = logDiv.scrollHeight;
      console.log(message);
    }
    
    function clearLog() {
      document.getElementById('debugLog').innerHTML = '<div style="color: #666;">[æ—¥å¿—å·²æ¸…ç©º]</div>';
    }
    
    function setResult(testId, message, success = true) {
      const resultDiv = document.getElementById(`result${testId}`);
      resultDiv.innerHTML = `<div style="color: ${success ? 'green' : 'red'}; margin-top: 10px;">${message}</div>`;
    }
    
    // æµ‹è¯•1: ç›´æ¥onclick
    function testDirectClick() {
      log('âœ… æµ‹è¯•1: ç›´æ¥onclick - æˆåŠŸï¼');
      setResult(1, 'âœ… ç›´æ¥onclickæµ‹è¯•æˆåŠŸ');
    }
    
    // æµ‹è¯•2: addEventListener
    document.addEventListener('DOMContentLoaded', function() {
      const eventBtn = document.getElementById('eventBtn');
      if (eventBtn) {
        eventBtn.addEventListener('click', function() {
          log('âœ… æµ‹è¯•2: addEventListener - æˆåŠŸï¼');
          setResult(2, 'âœ… addEventListeneræµ‹è¯•æˆåŠŸ');
        });
        log('ğŸ“ addEventListener å·²ç»‘å®š');
      }
    });
    
    // æµ‹è¯•3: åŠ¨æ€åˆ›å»ºæŒ‰é’®
    function createDynamicButton() {
      log('ğŸ”„ å¼€å§‹åˆ›å»ºåŠ¨æ€æŒ‰é’®...');
      const container = document.getElementById('dynamicContainer');
      
      const button = document.createElement('button');
      button.className = 'action-btn';
      button.textContent = 'åŠ¨æ€åˆ›å»ºçš„æŒ‰é’®';
      button.id = 'dynamicBtn';
      
      // æ–¹æ³•1: onclick
      button.onclick = function() {
        log('âœ… æµ‹è¯•3: åŠ¨æ€æŒ‰é’®onclick - æˆåŠŸï¼');
        setResult(3, 'âœ… åŠ¨æ€æŒ‰é’®æµ‹è¯•æˆåŠŸ');
      };
      
      // æ–¹æ³•2: addEventListener
      button.addEventListener('click', function() {
        log('ğŸ“ åŠ¨æ€æŒ‰é’®addEventListenerä¹Ÿè¢«è§¦å‘');
      });
      
      container.innerHTML = '';
      container.appendChild(button);
      log('âœ… åŠ¨æ€æŒ‰é’®åˆ›å»ºå®Œæˆ');
    }
    
    // æµ‹è¯•4: æ¨¡æ‹Ÿå®é™…åœºæ™¯
    function simulateRealScenario() {
      log('ğŸ­ å¼€å§‹æ¨¡æ‹Ÿå®é™…åœºæ™¯...');
      const chatArea = document.getElementById('chatArea');
      
      // æ¨¡æ‹Ÿæ¶ˆæ¯ç»“æ„
      const messageDiv = document.createElement('div');
      messageDiv.style.cssText = 'display: flex; gap: 12px; margin-bottom: 24px;';
      messageDiv.innerHTML = `
        <div style="min-width: 42px; height: 36px; padding: 0 8px; border-radius: 18px; display: flex; align-items: center; justify-content: center; font-size: 12px; font-weight: 600; background: linear-gradient(135deg, #5a7a9a 0%, #7a9ab8 100%); color: white;">
          Agent
        </div>
        <div style="flex: none; max-width: 70%; background: #f8f9fa; padding: 12px 16px; border-radius: 12px; font-size: 14px; color: #2c3e50;">
          <p>æµ‹è¯•å®Œæˆï¼ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®å¼€å§‹ç”Ÿæˆã€‚</p>
          <div style="margin-top: 12px;">
            <button class="action-btn primary" id="realTestBtn">å¼€å§‹ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹</button>
          </div>
        </div>
      `;
      
      chatArea.appendChild(messageDiv);
      log('âœ… æ¶ˆæ¯ç»“æ„åˆ›å»ºå®Œæˆ');
      
      // è·å–æŒ‰é’®å¹¶ç»‘å®šäº‹ä»¶
      const realBtn = document.getElementById('realTestBtn');
      if (realBtn) {
        log('âœ… æ‰¾åˆ°æŒ‰é’®å…ƒç´ ');
        
        // æ–¹æ³•1: ç›´æ¥è®¾ç½®onclick
        realBtn.onclick = function() {
          log('ğŸ¯ æµ‹è¯•4: å®é™…åœºæ™¯æŒ‰é’®è¢«ç‚¹å‡»ï¼');
          setResult(4, 'ğŸ¯ å®é™…åœºæ™¯æµ‹è¯•æˆåŠŸï¼');
          this.disabled = true;
          this.textContent = 'ç”Ÿæˆä¸­...';
          
          setTimeout(() => {
            this.disabled = false;
            this.textContent = 'å¼€å§‹ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹';
            log('ğŸ”„ æŒ‰é’®çŠ¶æ€å·²æ¢å¤');
          }, 2000);
        };
        
        // æ–¹æ³•2: addEventListener
        realBtn.addEventListener('click', function(e) {
          log('ğŸ“ addEventListener ä¹Ÿè¢«è§¦å‘');
        });
        
        log('âœ… äº‹ä»¶ç»‘å®šå®Œæˆ');
      } else {
        log('âŒ æœªæ‰¾åˆ°æŒ‰é’®å…ƒç´ ');
        setResult(4, 'âŒ æœªæ‰¾åˆ°æŒ‰é’®å…ƒç´ ', false);
      }
    }
    
    // é¡µé¢åŠ è½½å®Œæˆ
    document.addEventListener('DOMContentLoaded', function() {
      log('ğŸ“„ é¡µé¢åŠ è½½å®Œæˆï¼Œå¯ä»¥å¼€å§‹æµ‹è¯•');
    });
  </script>
</body>
</html>