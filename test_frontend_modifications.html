<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>前端修改测试</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      background: #f8fafc;
      padding: 20px;
      line-height: 1.6;
    }
    .test-container {
      max-width: 800px;
      margin: 0 auto;
      background: white;
      padding: 24px;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }
    .test-section {
      margin-bottom: 32px;
      padding: 20px;
      border: 1px solid #e8ecef;
      border-radius: 8px;
    }
    .test-title {
      font-size: 18px;
      font-weight: 600;
      color: #2c3e50;
      margin-bottom: 16px;
    }
    .test-description {
      color: #5d6d7e;
      margin-bottom: 16px;
    }
    
    /* 复制主要样式 */
    .tips-card {
      background: linear-gradient(135deg, #f0f7ff 0%, #e8f4fd 100%);
      border: 1px solid #cce4f7;
      border-radius: 12px;
      padding: 12px 16px;
      margin-bottom: 16px;
    }
    .tips-card.collapsible .tips-header {
      cursor: pointer;
      user-select: none;
      transition: all 0.2s ease;
      border-radius: 8px;
    }
    .tips-card.collapsible .tips-header:hover {
      background: rgba(58, 124, 189, 0.1);
      padding: 4px 8px;
      margin: -4px -8px;
    }
    .tips-card.collapsible .tips-header:focus {
      outline: 2px solid #5a7a9a;
      outline-offset: 2px;
    }
    .tips-header {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 14px;
      font-weight: 600;
      color: #3a7cbd;
      margin-bottom: 8px;
      justify-content: flex-start;
    }
    .tips-header .expand-icon {
      transition: transform 0.3s ease;
      flex-shrink: 0;
      margin-left: auto;
    }
    .tips-card.collapsed .expand-icon {
      transform: rotate(-90deg);
    }
    .tips-content {
      overflow: hidden;
      transition: max-height 0.3s ease, opacity 0.2s ease;
    }
    .tips-card.collapsed .tips-content {
      max-height: 0;
      opacity: 0;
      margin-bottom: 0;
    }
    .tips-card:not(.collapsed) .tips-content {
      max-height: 500px;
      opacity: 1;
    }
    .tips-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    .tips-list li {
      font-size: 13px;
      color: #4a6d8c;
      padding: 6px 0;
      border-bottom: 1px dashed #cce4f7;
    }
    .tips-list li:last-child {
      border-bottom: none;
      padding-bottom: 0;
    }
    
    .message {
      display: flex;
      gap: 12px;
      margin-bottom: 24px;
    }
    .message-avatar {
      min-width: 42px;
      height: 36px;
      padding: 0 8px;
      border-radius: 18px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      font-weight: 600;
      flex-shrink: 0;
      background: linear-gradient(135deg, #5a7a9a 0%, #7a9ab8 100%);
      color: white;
    }
    .message-content {
      flex: none;
      max-width: 70%;
      background: #f8f9fa;
      padding: 12px 16px;
      border-radius: 12px;
      font-size: 14px;
      color: #2c3e50;
    }
    .generate-action {
      margin-top: 12px;
    }
    .action-btn {
      padding: 10px 24px;
      font-size: 14px;
      font-weight: 500;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s;
      background: #5a7a9a;
      color: white;
      border: none;
    }
    .action-btn:hover {
      background: #4a6a8a;
    }
  </style>
</head>
<body>
  <div class="test-container">
    <h1>前端修改测试页面</h1>
    <p>测试三个修改点：操作说明面板高度、文字位置、自动显示生成按钮</p>

    <!-- 测试1: 修改后的操作说明面板 -->
    <div class="test-section">
      <div class="test-title">测试1: 修改后的操作说明面板</div>
      <div class="test-description">
        <strong>修改内容：</strong><br>
        1. 减少了上下内边距（从16px改为12px 16px）<br>
        2. 减少了标题下边距（从12px改为8px）<br>
        3. "操作说明"文字移到左边，紧挨叹号图标<br>
        4. 展开图标移到最右边
      </div>
      
      <div class="tips-card collapsible collapsed" id="testInstructionsCard">
        <div class="tips-header clickable" id="testInstructionsHeader" 
             role="button" 
             tabindex="0" 
             aria-expanded="false" 
             aria-controls="testInstructionsContent"
             aria-label="切换操作说明显示">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <circle cx="12" cy="12" r="10"></circle>
            <line x1="12" y1="16" x2="12" y2="12"></line>
            <line x1="12" y1="8" x2="12.01" y2="8"></line>
          </svg>
          <span>操作说明</span>
          <svg class="expand-icon" id="testInstructionsExpandIcon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <polyline points="6 9 12 15 18 9"></polyline>
          </svg>
        </div>
        <div class="tips-content" id="testInstructionsContent" aria-hidden="true">
          <ul class="tips-list">
            <li>1. 可选上传历史用例文件作为参考</li>
            <li>2. 上传需要生成的用例模板文件（必填）</li>
            <li>3. 选择对应的接口文档版本</li>
            <li>4. 点击"开始生成"按钮启动 AI 生成</li>
            <li>5. 在右侧对话框中与 AI 交互优化用例</li>
            <li>6. 生成完成后可查看详情并下载</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- 测试2: 自动显示生成按钮 -->
    <div class="test-section">
      <div class="test-title">测试2: 自动显示生成按钮功能</div>
      <div class="test-description">
        <strong>修改内容：</strong><br>
        当Agent回复包含"开始生成"、"可以生成"等关键词时，自动显示"开始生成测试用例"按钮，无需用户手动输入"开始生成"
      </div>
      
      <div class="message">
        <div class="message-avatar">Agent</div>
        <div class="message-content">
          <div>太好了！现在我有足够的信息了。您可以开始生成测试用例了。</div>
          <div class="generate-action">
            <button class="action-btn" onclick="alert('模拟开始生成测试用例')">开始生成测试用例</button>
          </div>
        </div>
      </div>
      
      <p><strong>触发关键词：</strong>开始生成、可以生成、可以开始生成、准备生成、现在可以生成</p>
    </div>

    <!-- 测试3: 对比展示 -->
    <div class="test-section">
      <div class="test-title">测试3: 修改前后对比</div>
      <div class="test-description">
        <strong>主要改进：</strong><br>
        ✅ 操作说明面板更紧凑，减少了不必要的空白<br>
        ✅ 文字布局更合理，"操作说明"紧挨图标<br>
        ✅ 用户体验更流畅，无需手动输入"开始生成"<br>
        ✅ 保持了原有的可访问性和键盘导航功能
      </div>
    </div>
  </div>

  <script>
    // 复制主要的JavaScript功能
    function toggleInstructions() {
      const card = document.getElementById('testInstructionsCard');
      const header = document.getElementById('testInstructionsHeader');
      const content = document.getElementById('testInstructionsContent');
      
      const isCollapsed = card.classList.contains('collapsed');
      
      if (isCollapsed) {
        card.classList.remove('collapsed');
        header.setAttribute('aria-expanded', 'true');
        content.setAttribute('aria-hidden', 'false');
        console.log('说明面板已展开');
      } else {
        card.classList.add('collapsed');
        header.setAttribute('aria-expanded', 'false');
        content.setAttribute('aria-hidden', 'true');
        console.log('说明面板已折叠');
      }
    }

    function handleInstructionsKeydown(event) {
      if (event.key === 'Enter' || event.key === ' ') {
        event.preventDefault();
        toggleInstructions();
      }
    }

    // 绑定事件监听器
    document.addEventListener('DOMContentLoaded', function() {
      const instructionsHeader = document.getElementById('testInstructionsHeader');
      
      if (instructionsHeader) {
        instructionsHeader.addEventListener('click', toggleInstructions);
        instructionsHeader.addEventListener('keydown', handleInstructionsKeydown);
      }
      
      console.log('前端修改测试页面已加载完成');
      console.log('测试说明：');
      console.log('1. 点击操作说明面板测试折叠/展开功能');
      console.log('2. 观察面板高度是否更紧凑');
      console.log('3. 检查"操作说明"文字是否紧挨叹号图标');
      console.log('4. 查看自动生成按钮的显示效果');
    });
  </script>
</body>
</html>